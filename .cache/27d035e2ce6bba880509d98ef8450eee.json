{"dependencies":[{"name":"mori","loc":{"line":1,"column":14}},{"name":"./projectMapper","loc":{"line":2,"column":26}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _mori = require(\"mori\");\n\nvar _mori2 = _interopRequireDefault(_mori);\n\nvar _projectMapper = require(\"./projectMapper\");\n\nvar _projectMapper2 = _interopRequireDefault(_projectMapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar now = new Date();\nvar start = now.getHours() + Math.floor(now.getMinutes() / 15) * 15;\n\nexports.default = function (_events, projects, setting) {\n  var daySpan = setting.daySpan,\n      numDays = setting.numDays;\n\n  // Should first filter  recurring events v. nonrecurring events\n\n  var events = Object.values(_mori2.default.toJs(_events));\n  events.sort(function (e1, e2) {\n    return e1.priority - e2.priority;\n  });\n\n  var days = [[]],\n      batchTotal = 0,\n      dayIdx = 0,\n      evtIdx = 0;\n  var DAY_LENGTH = daySpan[1] - daySpan[0];\n\n  while (evtIdx < events.length && dayIdx < numDays) {\n    var event = events[evtIdx++];\n    event = (0, _projectMapper2.default)(event, projects);\n\n    if (DAY_LENGTH - batchTotal > event.duration) {\n      days[dayIdx].push(event);\n      batchTotal += event.duration;\n    } else {\n      days.push([]);\n      days[++dayIdx].push(event);\n      batchTotal = event.duration;\n    }\n  }\n\n  return days;\n};"},"hash":"41d5b70582bd8197829d290d14fc08f7"}